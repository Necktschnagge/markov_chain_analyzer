<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MC Analyzer: markov_chain_analyzer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MC Analyzer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">markov_chain_analyzer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>MC Analyzer - a tool to calculate edge-reward expects, variances and covariances in discrete time markov chains</p>
<ul>
<li>Travis CI: Linux : compile with g++, clang : run doxygen and deploy docs : <a href="https://travis-ci.com/Necktschnagge/markov_chain_analyzer"></a></li>
</ul>
<p>You may use this documentation to get a quick overview how to use this solution. You may use the compiled code as a standalone command line tool or the code as header-only library to build up your own application on top. To use the C++ class and function definitions directly when writing your own code on top of it, see the <a href="https://necktschnagge.github.io/markov_chain_analyzer/annotated.html">Doxymentation of the code</a> generated by <a href="http://www.doxygen.nl/">Doxygen</a>.</p>
<ul>
<li><a href="https://www.boost.org/">C++ boost</a> (It is necessary to compiler boost, since features like <a href="https://www.boost.org/doc/libs/1_72_0/libs/regex/doc/html/index.html">boost::regex</a> are used.)</li>
<li><a href="https://amgcl.readthedocs.io/en/latest/">AMGCL</a> (automatically included via git submodule)</li>
<li><a href="https://github.com/nlohmann/json">nlohmann/json</a> (automatically included via git submodule)</li>
<li><a href="https://cmake.org/">CMake</a> (needed in case you want to build the command line tool)</li>
</ul>
<p>To build the command line tool (executable) you may have a look at how it is built on <a href="https://travis-ci.com/Necktschnagge/markov_chain_analyzer">Travis CI</a>. The configuration for Travis can be found in <a href="https://github.com/Necktschnagge/markov_chain_analyzer/blob/master/.travis.yml">.travis.yml</a>. There you can see what packages are needed to build on Linux. You may also use the following explanation to get started. </p>
<ol type="1">
<li>Download (compile and install where necessary) the following tools:<ul>
<li>A C++ Compiler (such as clang, g++ or MSVC++) with full <a href="https://en.cppreference.com/w/cpp/17">C++17</a> support</li>
<li><a href="https://cmake.org/">CMake</a>, make sure that CMake is able to find your compiler</li>
<li><a href="https://www.boost.org/">Boost</a>, make sure you compiled boost and that CMake is able to find your boost installation</li>
</ul>
</li>
<li>Clone <a href="https://github.com/Necktschnagge/markov_chain_analyzer">this repository</a> and make sure you pulled submodules, e.g. type: <div class="fragment"><div class="line">git clone &#39;https://github.com/Necktschnagge/markov_chain_analyzer&#39; &#39;./markov_chain_analyzer&#39;</div><div class="line">cd &#39;./markov_chain_analyzer&#39;</div><div class="line">git submodule init</div><div class="line">git submodule update</div></div><!-- fragment --></li>
<li>Move into the directory where the <code>CMakeLists.txt</code> is located (`cd './markov_chain_analyzer'<code>). Run</code>cmake .` to setup a platform-dependent project.</li>
<li>Run <code>cmake --build .</code> to build the command line tool or open the created project with your custom tool of choice.</li>
</ol>
<p>To use single classes and functions in your custom tool build upon MC_Analyzer, see <a href="https://necktschnagge.github.io/markov_chain_analyzer/annotated.html">the Doxymentation of the code</a>. For using the <b>command line tool MC_Analyzer</b> read the following lines.</p>
<p><b>MC_Analyzer CLI</b> stores markov chains as well as target sets associated to some integer id. For state enumeration integers <code>0,1, ... n-1</code> are used. <b>MC_Analyzer CLI</b> offers you various commands in order to obtain expects, variances and covariances and to create or destroy a markov chain. You may find the single <a href="https://necktschnagge.github.io/markov_chain_analyzer/structcli__commands.html">instructions and their detailed descriptions here</a>. We provide some example workflow here:</p>
<ol type="1">
<li>First you need to create a markov chain:</li>
</ol>
<p>On construction of a markov chain object a number of state decorations (i.e. number of <code>double</code> values that can be assigned to each state later) and a number of edge decorations (respectively) is assigned to the markov chain. You will need edge decorations in order to store edge-based rewards and state decorations in order to store e.g. expects and variances. These numbers are fixed during the lifetime of a markov chain object. In order to do so, start your executable like: </p><div class="fragment"><div class="line">&gt;mc_analyzer.exe</div></div><!-- fragment --><p> Then <b>MC_Analyzer CLI</b> will wait for input. So type an instruction like: </p><div class="fragment"><div class="line">reset_mc&gt;0&gt;2&gt;2</div></div><!-- fragment --><p> A markov chain is created and associated to id <code>0</code>. It provides two cells for <code>double</code> values per edge and node.</p>
<ol type="1">
<li>To fill the fresh created, still empty markov chain with some sensible content, you may load a markov chain from file.</li>
</ol>
<p><b>MC_Analyzer CLI</b> supports reading from a file format introduced with this tool, called <em>General Markov Chain Format (gmc)</em> as well as reading from <a href="https://www.prismmodelchecker.org/manual/Appendices/ExplicitModelFiles">PRISM's explicit model files</a>. In this guide we use the former option. So suppose you have an input file <code>markov_chain.gmc</code> with the following content </p><div class="fragment"><div class="line">$from, $to, $prob,$1</div><div class="line">1,2,0.5,4</div><div class="line">1,3,0.5,5</div><div class="line">2,0,1,2</div><div class="line">3,2,0.25,5</div><div class="line">3,4,0.5,2</div><div class="line">3,5,0.25,3</div><div class="line">4,4,0.8,2</div><div class="line">4,5,0.2,3</div><div class="line">5,0,1,3</div><div class="line">0,5,1,7</div></div><!-- fragment --><p> You may also <a href="https://github.com/Necktschnagge/markov_chain_analyzer/blob/master/examples/from-script/markov_chain.gmc">find this file here</a>.</p>
<p>The first line defines the semantics of the following content, saying the first value of the line is the state where the edge represented by the line is coming from, the second where it is going to. The third states the probability assigned to the edge. The third defines some edge-wise reward that will be assigned to the edge decoration at index 1. <b>! Note: Indexes of edge as well as state decorations start at zero and end with n-1 where n is the number given on construction.</b> So here the reward function will be placed into the <em>last</em> cells of the edge decoration arrays. <b>! Note: Probabilities are stored separately. There is no need to provid a cell edge decoration to store probabilities. There is also no option to convert edge decorations into probabilities.</b> <b>! Note: You need to use numbers <code>0, 1, ... ,n-1</code> as state ids. Otherwise behavior will be undefined.</b></p>
<p>In order to read the file just type <code>read_gmc&gt;0&gt;./markov_chain.gmc</code>. This way the file is loaded to the markov chain with id <code>0</code>. Again, see <a href="https://necktschnagge.github.io/markov_chain_analyzer/structcli__commands.html">instructions and their detailed descriptions here</a> for more information, including e.g. how to read from PRSIM's file formats.</p>
<p><em>You may also <a href="https://github.com/Necktschnagge/markov_chain_analyzer/blob/master/examples/from-script/instructions.mca">see the next instructions here</a></em></p>
<ol type="1">
<li>Before calculating variances (or expect values, or covariances) you need to tell, what the final states are.</li>
</ol>
<p>Type <code>read_target&gt;0&gt;./target_set.intset</code> to read a set of integers representing the goal states from file, where <code>./target_set.intset</code> <a href="https://github.com/Necktschnagge/markov_chain_analyzer/blob/master/examples/from-script/target_set.intset">(see also here)</a> just contains state ids separated by spaces: </p><div class="fragment"><div class="line">5 0</div></div><!-- fragment --><p> Like markov chains, target sets are stored by id, independently from markov chain ids. After running the instruction above the set <code>{0, 5}</code> is stored at id <code>0</code>.</p>
<ol type="1">
<li>Calculate the desired characteristics, e.g. variances:</li>
</ol>
<p>To do so, simply type <code>calc_variance&gt;0&gt;1&gt;0&gt;1&gt;0&gt;0</code>. Here, as arguments you have to pass the <em>id of the markov chain (0)</em>, the <em>index of the reward for which you want to calculate variance (1)</em>, the <em>id of the target set (0)</em>, the <em>index of state decorations where the resulting variances should be stored (1)</em>, the <em>index of state decorations where the expect values should be stored (0)</em>, an <em>index of edge decorations that can be used for intrim results (0)</em>. <b>! Note: Expect values have to be calculated before calculating variances. This command already does this job. But you need to provide some free state decoration index for this.</b> <b>! Note: You also need an index of edge decorations to store interim results.</b></p>
<ol type="1">
<li>To export the results just type <code>write_state_decorations&gt;0&gt;./output.decos</code>. This will write all state decoration arrays to file. <a href="https://github.com/Necktschnagge/markov_chain_analyzer/blob/master/examples/from-script/expected_output.decos">See this example output</a> The data are displayed in the form <code>{state-id}: {state-deco @ index 0} {state-deco @ index 1} ...</code> </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
